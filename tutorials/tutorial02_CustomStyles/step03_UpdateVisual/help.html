<html>
<head>
   <link rel="stylesheet" href="../../resource/help.css"/>
</head>
<body class="demo-description">
<h2>Step 3: UpdateVisual</h2>

<p>
  Implement high-performance rendering for nodes.
</p>

<p>
  To do this you need to implement <code>updateVisual()</code> which is called when the component decides to update the
  visual representation of a node. In contrast to <code>createVisual()</code>, we try to re-use the old visual instead
  of creating a new one.
</p>

<p>
  The <code>BallVisual</code> class saves the relevant data for creating a visual. <code>BallVisual.update()</code>
  checks whether this data has changed. If it hasn't changed, the old visual can be returned, otherwise the whole or
  part of the visual has to be re-rendered.
</p>

<p>
    With the "High Performance" button, you can switch between the custom implementation of updateVisual and the base
    implementation which simply calls createVisual().
</p>

<h3>Things to Try</h3>

<ul>
    <li>
        Click "Start Animation" to see the performance of createVisual().
    </li>
    <li>
        Turn on "High Performance" and click "Start Animation" to see the benefit of implementing updateVisual().
    </li>
    <li>
        Take a look at <code>MySimpleNodeStyle.updateVisual()</code> and <code>BallVisual.update()</code>.
    </li>
    <li>
        Test different values for the variable NODE_SQRT_COUNT in class SampleApplication to change the number of
        animated nodes.
    </li>
</ul>

<h3>Left to Do</h3>

<ul>
    <li>
        Find a way to draw a well-performing drop shadow.
    </li>
    <li>
        Implement <code>isInside()</code> and <code>getOutline()</code>, so edges will end at the node instead of its bounding box.
    </li>
    <li>
        Implement hit test, so a node won't get selected when clicking in the bounding box but not in the node itself.
    </li>
    <li>
        Implement <code>getBounds()</code>, so the drop shadow will be included in the bounds of the node.
    </li>
    <li>
        Draw edges from nodes to their labels.
    </li>
    <li>
        Create a custom label style.
    </li>
    <li>
        Create a custom edge style.
    </li>
    <li>
        Create a custom port style for nodes.
    </li>
</ul>
<br/>
<h3>Relevant Chapters in the Developers Guide:</h3>
<ul>
  <li><a href="https://docs.yworks.com/yfilesjavafx/doc/api/#/dguide/customizing_styles">Customizing Styles</a></li>
  <li><a href="https://docs.yworks.com/yfilesjavafx/doc/api/#/dguide/custom-styles_basic">Basic Custom Style Implementation</a></li>
  <li><a href="https://docs.yworks.com/yfilesjavafx/doc/api/#/dguide/custom-styles_basic%23custom-styles_basic_efficient-styles">Efficient Style Implementation</a></li>
</ul>
<h3>Relevant API:</h3>
<ul>
  <li><a href="https://docs.yworks.com/yfilesjavafx/doc/api/#/api/com.yworks.yfiles.graph.styles.AbstractNodeStyle">AbstractNodeStyle</a></li>
  <li><a href="https://docs.yworks.com/yfilesjavafx/doc/api/#/api/com.yworks.yfiles.graph.styles.AbstractNodeStyle%23AbstractNodeStyle-method-createVisual">AbstractNodeStyle#createVisual</a></li>
  <li><a href="https://docs.yworks.com/yfilesjavafx/doc/api/#/api/com.yworks.yfiles.graph.styles.AbstractNodeStyle%23AbstractNodeStyle-method-updateVisual">AbstractNodeStyle#updateVisual</a></li>
</ul>

</body>
</html>